# 20260201142853 - AI Agent Core

| Field              | Value |
|--------------------|-------|
| **Created**        | 2026-02-01 14:28:48 EST |
| **Last Modified**  | 2026-02-01 14:28:48 EST |
| **Status**         | todo |
| **Blocked-By**     | 20260201142848 |
| **Touches**        | `src/lib/ai/tools.ts`, `src/lib/ai/agent.ts`, `src/lib/ai/prompts.ts`, `src/lib/ai/index.ts` |
| **References**     | [Design Doc](../../design-claude.md) |

## Description

Implement the AI agent â€” tool definitions, the `runAgent` orchestrator, and system prompts. Tools accept a Drive client as a parameter (dependency injection).

## Acceptance Criteria

- [ ] `createDriveTools` returns tools: `list_drive_folder`, `read_drive_file`, `search_drive`
- [ ] Each tool has a valid zod schema
- [ ] `runAgent` calls `streamText` with correct params
- [ ] `runAgent` invokes `onChunk` callback for text deltas
- [ ] `runAgent` returns `AgentResult` with id and parts
- [ ] `runAgent` respects maxSteps
- [ ] `buildSystemPrompt` works with and without context
- [ ] All tests pass. No imports from `lib/db/` or `lib/google/`

## Progress Log

### 2026-02-01 14:28:48 EST
Initial creation. Task extracted from design doc Section 7.6.3.
